# Block direct access via IP (134.199.134.194). Only allow Host: eggcavity.com
#
# On the server:
# 1. Copy this into your Nginx config.
# 2. For 443: use the SAME ssl_certificate and ssl_certificate_key paths as your
#    main eggcavity.com server block (copy those two lines from the working block).
#    If you don't have certs on the server (e.g. Cloudflare Flexible SSL), use
#    only the port-80 block below and leave 443 to your main block.
# 3. Ensure your main eggcavity.com block does NOT use default_server.
# 4. Run: sudo nginx -t && sudo systemctl reload nginx

# Default server: reject requests by IP or wrong host (no cert needed for 80)
server {
    listen 80 default_server;
    listen [::]:80 default_server;
    server_name _ 134.199.134.194;
    return 444;
}

# Optional: also block HTTPS to IP. Copy ssl_certificate + ssl_certificate_key
# from your main eggcavity.com server block (replace the paths below).
# server {
#     listen 443 ssl default_server;
#     listen [::]:443 ssl default_server;
#     ssl_certificate     /path/from/your/main/block/fullchain.pem;
#     ssl_certificate_key /path/from/your/main/block/privkey.pem;
#     server_name _ 134.199.134.194;
#     return 444;
# }

# Your main site block should look like this (no default_server):
# server {
#     listen 80;
#     listen [::]:80;
#     listen 443 ssl;
#     listen [::]:443 ssl;
#     server_name eggcavity.com www.eggcavity.com;
#     # ... root, index, php-fpm, etc. ...
# }
